# 成就系统管理端使用说明

## 📍 访问路径

管理后台 → 成就系统管理
或直接访问：`/admin/achievements`

## 🎯 功能说明

### 1. 查看成就列表

成就列表展示所有已创建的成就，包括：
- **成就图标**：展示成就的图标，如果没有图标则显示默认的奖杯图标
- **成就名称**：成就的名称
- **描述**：成就的详细描述（鼠标悬停可查看完整内容）
- **难度**：1-5星难度等级
- **关联招式**：显示该成就关联了多少个招式
- **启用状态**：该成就是否在用户端可见
- **创建时间**：成就的创建时间

### 2. 筛选成就

支持以下筛选条件：
- **成就名称**：输入关键词搜索
- **难度等级**：按1-5星筛选
- **启用状态**：筛选已启用或已禁用的成就

### 3. 新增成就

点击右上角 **"新增成就"** 按钮，填写以下信息：

#### 基本信息
- **成就名称**（必填）：例如 "基础达人"
- **成就描述**（必填）：详细描述成就的解锁条件，例如 "解锁所有难度为1的基础招式，迈出花式足球的第一步！"
- **难度等级**（必填）：选择1-5星
  - ⭐ 1星：非常简单
  - ⭐⭐ 2星：简单
  - ⭐⭐⭐ 3星：中等
  - ⭐⭐⭐⭐ 4星：困难
  - ⭐⭐⭐⭐⭐ 5星：非常困难

#### 关联招式（必填）
- 至少选择一个招式
- 支持搜索招式名称
- 支持多选
- 用户解锁所有关联的招式后，成就会自动点亮

#### 成就图标（可选）
- 点击或拖拽上传图片
- 支持格式：JPEG、PNG、GIF、WebP
- 文件大小：≤ 5MB
- 建议尺寸：256x256px 方形图片
- 图片会自动上传到 R2 云存储

#### 启用状态
- **启用**：成就在用户端可见
- **禁用**：成就在用户端不可见（可用于测试或临时下线）

### 4. 编辑成就

点击列表中的 **"编辑"** 按钮，可修改成就的所有信息。

**注意：**
- 修改关联招式时，会先删除旧的关联，再插入新的关联
- 已完成该成就的用户不受影响

### 5. 删除成就

点击列表中的 **"删除"** 按钮，会删除成就及其所有关联数据。

**警告：**
- 删除成就后，该成就的所有关联招式会被清除
- 用户的成就进度记录也会被清除
- 此操作不可撤销！

## 🔄 自动更新机制

### 触发时机
当用户在招式库中解锁一个招式时，系统会自动：

1. 查找所有包含该招式的启用状态的成就
2. 计算每个成就的进度（已解锁招式数 / 总招式数）
3. 更新或创建用户的成就进度记录
4. 如果用户已解锁该成就的所有招式，自动点亮成就

### 示例流程

假设创建了一个成就 "基础达人"，关联了5个难度为1的招式：
1. 用户解锁第1个招式 → 成就进度：1/5 (20%)
2. 用户解锁第2个招式 → 成就进度：2/5 (40%)
3. 用户解锁第3个招式 → 成就进度：3/5 (60%)
4. 用户解锁第4个招式 → 成就进度：4/5 (80%)
5. 用户解锁第5个招式 → 成就进度：5/5 (100%) ✅ 成就点亮！

## 💡 最佳实践

### 成就设计建议

1. **难度1星成就**：关联3-5个简单招式，适合新手
2. **难度2星成就**：关联5-8个初级招式
3. **难度3星成就**：关联8-12个中级招式
4. **难度4星成就**：关联12-15个高级招式
5. **难度5星成就**：关联15+个专家级招式或所有招式

### 成就命名建议

- 使用生动的名称，例如：
  - ✅ "基础达人"、"进阶玩家"、"颠球大师"
  - ❌ "成就1"、"招式组1"
  
### 成就描述建议

- 清晰说明解锁条件
- 使用鼓励性语言
- 例如：
  - "解锁所有难度为1的基础招式，迈出花式足球的第一步！"
  - "解锁所有'颠球技巧'类型的招式，成为颠球大师！"

### 图标选择建议

- 使用与成就主题相关的图标
- 保持一致的视觉风格
- 确保图标在小尺寸下也清晰可见

## 🗂️ 成就分类建议

### 按难度分类
- 新手成就（1星）
- 初级成就（2星）
- 中级成就（3星）
- 高级成就（4星）
- 大师成就（5星）

### 按招式类型分类
- 颠球大师：解锁所有颠球类招式
- 街头传奇：解锁所有街头风格招式
- 技巧专家：解锁所有技巧类招式

### 按数量分类
- 启程者：解锁10个招式
- 探索者：解锁50个招式
- 收藏家：解锁100个招式
- 全能王者：解锁所有招式

## ❓ 常见问题

### Q1: 如果修改成就的关联招式，已完成的用户会受影响吗？
A: 不会。用户的成就完成记录会保留，但新用户需要按新的招式列表来解锁成就。

### Q2: 禁用的成就用户还能看到吗？
A: 不能。禁用后的成就在用户端完全不可见，包括成就列表和个人中心。

### Q3: 删除成就后可以恢复吗？
A: 不能。删除操作不可撤销，请谨慎操作。

### Q4: 成就图标必须上传吗？
A: 不是必须的。如果不上传图标，系统会显示默认的奖杯图标。

### Q5: 一个成就最多可以关联多少个招式？
A: 理论上没有限制，但建议不超过50个招式，以保持成就的合理性。

## 🔗 相关文档

- 数据库设计：`/fshome-webapp/readme/ACHIEVEMENT_SYSTEM_SIMPLE.md`
- SQL脚本：`/fshome-webapp/database/setup_achievement_system_simple.sql`

## 📊 数据统计

在仪表盘中可以查看：
- 总成就数
- 启用的成就数
- 用户完成成就的平均数
- 最受欢迎的成就（完成人数最多）
- 最难的成就（完成人数最少）

---

**开发团队**: FSHome
**最后更新**: 2025-11-13

